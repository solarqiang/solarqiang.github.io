<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="504px" preserveAspectRatio="none" style="width:988px;height:504px;" version="1.1" viewBox="0 0 988 504" width="988px" zoomAndPan="magnify"><defs><filter height="300%" id="fwqo16yk5xqg8" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fwqo16yk5xqg8)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="110" y="69.7988"/><rect fill="#FFFFFF" filter="url(#fwqo16yk5xqg8)" height="136.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="426" y="128.4199"/><rect fill="#FFFFFF" filter="url(#fwqo16yk5xqg8)" height="99.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="431" y="165.7305"/><rect fill="#FFFFFF" filter="url(#fwqo16yk5xqg8)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="436" y="237.3516"/><rect fill="#FFFFFF" filter="url(#fwqo16yk5xqg8)" height="9" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="426" y="445.9043"/><rect fill="#FFFFFF" filter="url(#fwqo16yk5xqg8)" height="143.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="669" y="200.041"/><rect fill="#FFFFFF" filter="url(#fwqo16yk5xqg8)" height="72.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="842" y="343.9727"/><rect fill="#FFFFFF" filter="url(#fwqo16yk5xqg8)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="943" y="373.2832"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="114.5" x2="114.5" y1="38.4883" y2="463.9043"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="263.5" x2="263.5" y1="38.4883" y2="463.9043"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="431" x2="431" y1="38.4883" y2="463.9043"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="673.5" x2="673.5" y1="38.4883" y2="463.9043"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="847" x2="847" y1="38.4883" y2="463.9043"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="948" x2="948" y1="38.4883" y2="463.9043"/><rect fill="#FEFECE" filter="url(#fwqo16yk5xqg8)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="63.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="70.5" y="23.5352">ContextImpl</text><rect fill="#FEFECE" filter="url(#fwqo16yk5xqg8)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="63.5" y="462.9043"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="85" x="70.5" y="483.4395">ContextImpl</text><rect fill="#FEFECE" filter="url(#fwqo16yk5xqg8)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="176.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="183.5" y="23.5352">ActivityManagerService</text><rect fill="#FEFECE" filter="url(#fwqo16yk5xqg8)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="176.5" y="462.9043"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="183.5" y="483.4395">ActivityManagerService</text><rect fill="#FEFECE" filter="url(#fwqo16yk5xqg8)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="374" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="381" y="23.5352">ActiveServices</text><rect fill="#FEFECE" filter="url(#fwqo16yk5xqg8)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="374" y="462.9043"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="381" y="483.4395">ActiveServices</text><rect fill="#FEFECE" filter="url(#fwqo16yk5xqg8)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="141" x="601.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="127" x="608.5" y="23.5352">ApplicationThread</text><rect fill="#FEFECE" filter="url(#fwqo16yk5xqg8)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="141" x="601.5" y="462.9043"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="127" x="608.5" y="483.4395">ApplicationThread</text><rect fill="#FEFECE" filter="url(#fwqo16yk5xqg8)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="789" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="796" y="23.5352">ActivityThread</text><rect fill="#FEFECE" filter="url(#fwqo16yk5xqg8)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="789" y="462.9043"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="796" y="483.4395">ActivityThread</text><rect fill="#FEFECE" filter="url(#fwqo16yk5xqg8)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="915" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="922" y="23.5352">Service</text><rect fill="#FEFECE" filter="url(#fwqo16yk5xqg8)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="62" x="915" y="462.9043"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="922" y="483.4395">Service</text><rect fill="#FFFFFF" filter="url(#fwqo16yk5xqg8)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="110" y="69.7988"/><rect fill="#FFFFFF" filter="url(#fwqo16yk5xqg8)" height="136.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="426" y="128.4199"/><rect fill="#FFFFFF" filter="url(#fwqo16yk5xqg8)" height="99.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="431" y="165.7305"/><rect fill="#FFFFFF" filter="url(#fwqo16yk5xqg8)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="436" y="237.3516"/><rect fill="#FFFFFF" filter="url(#fwqo16yk5xqg8)" height="9" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="426" y="445.9043"/><rect fill="#FFFFFF" filter="url(#fwqo16yk5xqg8)" height="143.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="669" y="200.041"/><rect fill="#FFFFFF" filter="url(#fwqo16yk5xqg8)" height="72.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="842" y="343.9727"/><rect fill="#FFFFFF" filter="url(#fwqo16yk5xqg8)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="943" y="373.2832"/><polygon fill="#A80036" points="98,65.7988,108,69.7988,98,73.7988,102,69.7988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="104" y1="69.7988" y2="69.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="10" y="65.0566">unbindService</text><polygon fill="#A80036" points="252,95.1094,262,99.1094,252,103.1094,256,99.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="115" x2="258" y1="99.1094" y2="99.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="122" y="94.3672">â€ƒunbindService</text><polygon fill="#A80036" points="414,124.4199,424,128.4199,414,132.4199,418,128.4199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="264" x2="420" y1="128.4199" y2="128.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="271" y="123.6777">unbindServiceLocked</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="436" x2="483" y1="152.7305" y2="152.7305"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="483" x2="483" y1="152.7305" y2="165.7305"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="442" x2="483" y1="165.7305" y2="165.7305"/><polygon fill="#A80036" points="452,161.7305,442,165.7305,452,169.7305,448,165.7305" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="448" y="147.9883">removeConnectionLocked</text><polygon fill="#A80036" points="657,196.041,667,200.041,657,204.041,661,200.041" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="441" x2="663" y1="200.041" y2="200.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="448" y="195.2988">scheduleUnbindService</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="446" x2="488" y1="229.3516" y2="229.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="488" x2="488" y1="229.3516" y2="242.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="447" x2="488" y1="242.3516" y2="242.3516"/><polygon fill="#A80036" points="457,238.3516,447,242.3516,457,246.3516,453,242.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="453" y="224.6094">bringDownServiceIfNeededLocked</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="679" x2="721" y1="301.6621" y2="301.6621"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="721" x2="721" y1="301.6621" y2="314.6621"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="680" x2="721" y1="314.6621" y2="314.6621"/><polygon fill="#A80036" points="690,310.6621,680,314.6621,690,318.6621,686,314.6621" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="25" x="686" y="296.9199">new</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="715" y="296.9199">BindServiceData</text><polygon fill="#A80036" points="830,339.9727,840,343.9727,830,347.9727,834,343.9727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="674" x2="836" y1="343.9727" y2="343.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="681" y="339.2305">â€ƒhandleUnbindService</text><polygon fill="#A80036" points="931,369.2832,941,373.2832,931,377.2832,935,373.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="852" x2="937" y1="373.2832" y2="373.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="859" y="368.541">onUnind</text><polygon fill="#A80036" points="863,383.2832,853,387.2832,863,391.2832,859,387.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="857" x2="947" y1="387.2832" y2="387.2832"/><polygon fill="#A80036" points="275,412.5938,265,416.5938,275,420.5938,271,416.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="269" x2="846" y1="416.5938" y2="416.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="98" x="281" y="411.8516">UnbindFinished</text><polygon fill="#A80036" points="414,441.9043,424,445.9043,414,449.9043,418,445.9043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="264" x2="420" y1="445.9043" y2="445.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="271" y="441.1621">UnbindFinishedLocked</text><!--
@startuml unbindService
participant ContextImpl
participant ActivityManagerService
participant ActiveServices

[-> ContextImpl: unbindService
activate ContextImpl
ContextImpl -> ActivityManagerService - -: â€ƒunbindService
ActivityManagerService -> ActiveServices: unbindServiceLocked

activate ActiveServices
ActiveServices -> ActiveServices ++: removeConnectionLocked
ActiveServices -> ApplicationThread: scheduleUnbindService
activate ApplicationThread
ActiveServices -> ActiveServices ++: bringDownServiceIfNeededLocked
deactivate ActiveServices
deactivate ActiveServices
deactivate ActiveServices

ApplicationThread - -> ApplicationThread: <i>new</i> BindServiceData
ApplicationThread -> ActivityThread - -: â€ƒhandleUnbindService

activate ActivityThread
ActivityThread -> Service ++: onUnind
return
ActivityThread -> ActivityManagerService - -: UnbindFinished
ActivityManagerService -> ActiveServices: UnbindFinishedLocked
activate ActiveServices
@enduml

PlantUML version 1.2019.09(Tue Aug 27 00:19:51 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 10.0.2+13
Operating System: Mac OS X
OS Version: 10.14.6
Default Encoding: US-ASCII
Language: zh
Country: CN
--></g></svg>