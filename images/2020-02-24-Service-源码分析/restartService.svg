<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="412px" preserveAspectRatio="none" style="width:542px;height:412px;" version="1.1" viewBox="0 0 542 412" width="542px" zoomAndPan="magnify"><defs><filter height="300%" id="f1um8i8zgv15kr" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1um8i8zgv15kr)" height="76.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="90.5" y="77.7988"/><rect fill="#FFFFFF" filter="url(#f1um8i8zgv15kr)" height="34.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="95.5" y="120.1094"/><rect fill="#FFFFFF" filter="url(#f1um8i8zgv15kr)" height="35.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="324.5" y="154.4199"/><rect fill="#FFFFFF" filter="url(#f1um8i8zgv15kr)" height="128.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="324.5" y="234.041"/><rect fill="#FFFFFF" filter="url(#f1um8i8zgv15kr)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="329.5" y="276.3516"/><rect fill="#FFFFFF" filter="url(#f1um8i8zgv15kr)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="329.5" y="348.6621"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="95" x2="95" y1="38.4883" y2="371.6621"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="329.5" x2="329.5" y1="38.4883" y2="371.6621"/><rect fill="#FEFECE" filter="url(#f1um8i8zgv15kr)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="15" y="23.5352">ActivityManagerService</text><rect fill="#FEFECE" filter="url(#f1um8i8zgv15kr)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="8" y="370.6621"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="15" y="391.1973">ActivityManagerService</text><rect fill="#FEFECE" filter="url(#f1um8i8zgv15kr)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="272.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="279.5" y="23.5352">ActiveServices</text><rect fill="#FEFECE" filter="url(#f1um8i8zgv15kr)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="272.5" y="370.6621"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="279.5" y="391.1973">ActiveServices</text><rect fill="#FFFFFF" filter="url(#f1um8i8zgv15kr)" height="76.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="90.5" y="77.7988"/><rect fill="#FFFFFF" filter="url(#f1um8i8zgv15kr)" height="34.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="95.5" y="120.1094"/><rect fill="#FFFFFF" filter="url(#f1um8i8zgv15kr)" height="35.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="324.5" y="154.4199"/><rect fill="#FFFFFF" filter="url(#f1um8i8zgv15kr)" height="128.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="324.5" y="234.041"/><rect fill="#FFFFFF" filter="url(#f1um8i8zgv15kr)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="329.5" y="276.3516"/><rect fill="#FFFFFF" filter="url(#f1um8i8zgv15kr)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="329.5" y="348.6621"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="95.5" x2="142.5" y1="64.7988" y2="64.7988"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="142.5" x2="142.5" y1="64.7988" y2="77.7988"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="101.5" x2="142.5" y1="77.7988" y2="77.7988"/><polygon fill="#A80036" points="111.5,73.7988,101.5,77.7988,111.5,81.7988,107.5,77.7988" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="107.5" y="60.0566">appDiedLocked</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="100.5" x2="147.5" y1="107.1094" y2="107.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="147.5" x2="147.5" y1="107.1094" y2="120.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="106.5" x2="147.5" y1="120.1094" y2="120.1094"/><polygon fill="#A80036" points="116.5,116.1094,106.5,120.1094,116.5,124.1094,112.5,120.1094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="112.5" y="102.3672">cleanUpApplicationRecordLocked</text><polygon fill="#A80036" points="312.5,150.4199,322.5,154.4199,312.5,158.4199,316.5,154.4199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="95.5" x2="318.5" y1="154.4199" y2="154.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="102.5" y="149.6777"> killServicesLocked</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="334.5" x2="376.5" y1="188.7305" y2="188.7305"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="376.5" x2="376.5" y1="188.7305" y2="201.7305"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="329.5" x2="376.5" y1="201.7305" y2="201.7305"/><polygon fill="#A80036" points="339.5,197.7305,329.5,201.7305,339.5,205.7305,335.5,201.7305" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="341.5" y="183.9883">scheduleServiceRestartLocked</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="329.5" x2="376.5" y1="221.041" y2="221.041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="376.5" x2="376.5" y1="221.041" y2="234.041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="335.5" x2="376.5" y1="234.041" y2="234.041"/><polygon fill="#A80036" points="345.5,230.041,335.5,234.041,345.5,238.041,341.5,234.041" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="341.5" y="216.2988">performServiceRestartLocked</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="339.5" x2="381.5" y1="268.3516" y2="268.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="381.5" x2="381.5" y1="268.3516" y2="281.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="340.5" x2="381.5" y1="281.3516" y2="281.3516"/><polygon fill="#A80036" points="350.5,277.3516,340.5,281.3516,350.5,285.3516,346.5,281.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="346.5" y="263.6094">isServiceNeededLocked</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="334.5" x2="381.5" y1="335.6621" y2="335.6621"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="381.5" x2="381.5" y1="335.6621" y2="348.6621"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="340.5" x2="381.5" y1="348.6621" y2="348.6621"/><polygon fill="#A80036" points="350.5,344.6621,340.5,348.6621,350.5,352.6621,346.5,348.6621" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="346.5" y="330.9199">bingUpServiceLocked</text><!--
@startuml restartService
ActivityManagerService -> ActivityManagerService ++: appDiedLocked
ActivityManagerService -> ActivityManagerService ++: cleanUpApplicationRecordLocked
ActivityManagerService -> ActiveServices - -:  killServicesLocked
deactivate ActivityManagerService
deactivate ActivityManagerService

activate ActiveServices
ActiveServices -> ActiveServices - -: scheduleServiceRestartLocked
deactivate ActiveServices
ActiveServices -> ActiveServices ++: performServiceRestartLocked
ActiveServices -> ActiveServices ++: isServiceNeededLocked
deactivate ActiveServices
ActiveServices -> ActiveServices ++: bingUpServiceLocked
@enduml

PlantUML version 1.2019.09(Tue Aug 27 00:19:51 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 10.0.2+13
Operating System: Mac OS X
OS Version: 10.14.6
Default Encoding: US-ASCII
Language: zh
Country: CN
--></g></svg>