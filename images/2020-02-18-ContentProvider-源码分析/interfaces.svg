<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="542px" preserveAspectRatio="none" style="width:768px;height:542px;" version="1.1" viewBox="0 0 768 542" width="768px" zoomAndPan="magnify"><defs><filter height="300%" id="fyiown06tuslp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--cluster 客户端对象--><polygon fill="#FFFFFF" filter="url(#fyiown06tuslp)" points="22,297,98,297,105,319.4883,371,319.4883,371,409,22,409,22,297" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="105" y1="319.4883" y2="319.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="26" y="312.5352">客户端对象</text><!--cluster 服务端对象--><polygon fill="#FFFFFF" filter="url(#fyiown06tuslp)" points="395,297,471,297,478,319.4883,746,319.4883,746,530,395,530,395,297" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="395" x2="478" y1="319.4883" y2="319.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="399" y="312.5352">服务端对象</text><!--cluster 接口--><polygon fill="#FFFFFF" filter="url(#fyiown06tuslp)" points="208,24,242,24,249,46.4883,627,46.4883,627,273,208,273,208,24" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="208" x2="249" y1="46.4883" y2="46.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="28" x="212" y="39.5352">接口</text><!--class ContentProviderProxy--><rect fill="#FEFECE" filter="url(#fyiown06tuslp)" height="60.9551" id="ContentProviderProxy" style="stroke: #A80036; stroke-width: 1.5;" width="156" x="38" y="332"/><ellipse cx="53" cy="348" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M55.9731,353.6431 Q55.3921,353.9419 54.7529,354.0913 Q54.1138,354.2407 53.4082,354.2407 Q50.9014,354.2407 49.5815,352.5889 Q48.2617,350.937 48.2617,347.8159 Q48.2617,344.6865 49.5815,343.0347 Q50.9014,341.3828 53.4082,341.3828 Q54.1138,341.3828 54.7612,341.5322 Q55.4087,341.6816 55.9731,341.9805 L55.9731,344.7031 Q55.3423,344.1221 54.7488,343.8523 Q54.1553,343.5825 53.5244,343.5825 Q52.1797,343.5825 51.4949,344.6492 Q50.8101,345.7158 50.8101,347.8159 Q50.8101,349.9077 51.4949,350.9744 Q52.1797,352.041 53.5244,352.041 Q54.1553,352.041 54.7488,351.7712 Q55.3423,351.5015 55.9731,350.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="124" x="67" y="352.5352">ContentProviderProxy</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39" x2="193" y1="364" y2="364"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="46" y="372"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="58" y="378.6348">IBinder mRemote</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="39" x2="193" y1="384.9551" y2="384.9551"/><!--class ContentResolver--><rect fill="#FEFECE" filter="url(#fyiown06tuslp)" height="48" id="ContentResolver" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="229.5" y="338.5"/><ellipse cx="244.5" cy="354.5" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M244.6133,349.8481 L243.4595,354.9199 L245.7754,354.9199 Z M243.1191,347.6069 L246.1157,347.6069 L249.4609,360 L247.0122,360 L246.2485,356.937 L242.9697,356.937 L242.2227,360 L239.7739,360 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="93" x="258.5" y="359.0352">ContentResolver</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="230.5" x2="353.5" y1="370.5" y2="370.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="230.5" x2="353.5" y1="378.5" y2="378.5"/><!--class ContentProvider--><rect fill="#FEFECE" filter="url(#fyiown06tuslp)" height="60.9551" id="ContentProvider" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="606" y="332"/><ellipse cx="621" cy="348" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M623.9731,353.6431 Q623.3921,353.9419 622.7529,354.0913 Q622.1138,354.2407 621.4082,354.2407 Q618.9014,354.2407 617.5815,352.5889 Q616.2617,350.937 616.2617,347.8159 Q616.2617,344.6865 617.5815,343.0347 Q618.9014,341.3828 621.4082,341.3828 Q622.1138,341.3828 622.7612,341.5322 Q623.4087,341.6816 623.9731,341.9805 L623.9731,344.7031 Q623.3423,344.1221 622.7488,343.8523 Q622.1553,343.5825 621.5244,343.5825 Q620.1797,343.5825 619.4949,344.6492 Q618.8101,345.7158 618.8101,347.8159 Q618.8101,349.9077 619.4949,350.9744 Q620.1797,352.041 621.5244,352.041 Q622.1553,352.041 622.7488,351.7712 Q623.3423,351.5015 623.9731,350.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="92" x="635" y="352.5352">ContentProvider</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="607" x2="729" y1="364" y2="364"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="614" y="372"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="64" x="626" y="378.6348">mTransport</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="607" x2="729" y1="384.9551" y2="384.9551"/><!--class ContentProviderNative--><rect fill="#FEFECE" filter="url(#fyiown06tuslp)" height="48" id="ContentProviderNative" style="stroke: #A80036; stroke-width: 1.5;" width="160" x="411" y="338.5"/><ellipse cx="426" cy="354.5" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M426.1133,349.8481 L424.9595,354.9199 L427.2754,354.9199 Z M424.6191,347.6069 L427.6157,347.6069 L430.9609,360 L428.5122,360 L427.7485,356.937 L424.4697,356.937 L423.7227,360 L421.2739,360 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="128" x="440" y="359.0352">ContentProviderNative</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="412" x2="570" y1="370.5" y2="370.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="412" x2="570" y1="378.5" y2="378.5"/><!--class Transport--><rect fill="#FEFECE" filter="url(#fyiown06tuslp)" height="60.9551" id="Transport" style="stroke: #A80036; stroke-width: 1.5;" width="174" x="483" y="453"/><ellipse cx="537.25" cy="469" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M540.2231,474.6431 Q539.6421,474.9419 539.0029,475.0913 Q538.3638,475.2407 537.6582,475.2407 Q535.1514,475.2407 533.8315,473.5889 Q532.5117,471.937 532.5117,468.8159 Q532.5117,465.6865 533.8315,464.0347 Q535.1514,462.3828 537.6582,462.3828 Q538.3638,462.3828 539.0112,462.5322 Q539.6587,462.6816 540.2231,462.9805 L540.2231,465.7031 Q539.5923,465.1221 538.9988,464.8523 Q538.4053,464.5825 537.7744,464.5825 Q536.4297,464.5825 535.7449,465.6492 Q535.0601,466.7158 535.0601,468.8159 Q535.0601,470.9077 535.7449,471.9744 Q536.4297,473.041 537.7744,473.041 Q538.4053,473.041 538.9988,472.7712 Q539.5923,472.5015 540.2231,471.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="57" x="557.75" y="473.5352">Transport</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="484" x2="656" y1="485" y2="485"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="491" y="493"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="148" x="503" y="499.6348">ContentProvider mInterface</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="484" x2="656" y1="505.9551" y2="505.9551"/><!--class ContentInterface--><rect fill="#FEFECE" filter="url(#fyiown06tuslp)" height="112.7754" id="ContentInterface" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="440" y="144"/><ellipse cx="455" cy="160" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M450.9277,155.7651 L450.9277,153.6069 L458.3071,153.6069 L458.3071,155.7651 L455.8418,155.7651 L455.8418,163.8418 L458.3071,163.8418 L458.3071,166 L450.9277,166 L450.9277,163.8418 L453.3931,163.8418 L453.3931,155.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="94" x="469" y="164.5352">ContentInterface</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="441" x2="565" y1="176" y2="176"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="441" x2="565" y1="184" y2="184"/><ellipse cx="451" cy="195" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="48" x="460" y="198.6348">insert(...)</text><ellipse cx="451" cy="207.9551" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="49" x="460" y="211.5898">delete(...)</text><ellipse cx="451" cy="220.9102" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="54" x="460" y="224.5449">update(...)</text><ellipse cx="451" cy="233.8652" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="92" x="460" y="237.5">query(...): Cursor</text><ellipse cx="451" cy="246.8203" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="98" x="460" y="250.4551">getType(...): String</text><path d="M395,59 L395,84.3105 A0,0 0 0 0 395,84.3105 L499,84.3105 L503,143.87 L507,84.3105 L611,84.3105 A0,0 0 0 0 611,84.3105 L611,69 L601,59 L395,59 A0,0 0 0 0 395,59 " fill="#FBFB77" filter="url(#fyiown06tuslp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M601,59 L601,69 L611,69 L601,59 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="401" y="76.5684">调用者调用，服务端要实现的接口</text><!--class IContentProvider--><rect fill="#FEFECE" filter="url(#fyiown06tuslp)" height="112.7754" id="IContentProvider" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="228.5" y="144"/><ellipse cx="243.5" cy="160" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M239.4277,155.7651 L239.4277,153.6069 L246.8071,153.6069 L246.8071,155.7651 L244.3418,155.7651 L244.3418,163.8418 L246.8071,163.8418 L246.8071,166 L239.4277,166 L239.4277,163.8418 L241.8931,163.8418 L241.8931,155.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="95" x="257.5" y="164.5352">IContentProvider</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="229.5" x2="354.5" y1="176" y2="176"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="229.5" x2="354.5" y1="184" y2="184"/><ellipse cx="239.5" cy="195" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="48" x="248.5" y="198.6348">insert(...)</text><ellipse cx="239.5" cy="207.9551" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="49" x="248.5" y="211.5898">delete(...)</text><ellipse cx="239.5" cy="220.9102" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="54" x="248.5" y="224.5449">update(...)</text><ellipse cx="239.5" cy="233.8652" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="92" x="248.5" y="237.5">query(...): Cursor</text><ellipse cx="239.5" cy="246.8203" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="98" x="248.5" y="250.4551">getType(...): String</text><path d="M224,59 L224,84.3105 A0,0 0 0 0 224,84.3105 L288,84.3105 L292,143.87 L296,84.3105 L360,84.3105 A0,0 0 0 0 360,84.3105 L360,69 L350,59 L224,59 A0,0 0 0 0 224,59 " fill="#FBFB77" filter="url(#fyiown06tuslp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M350,59 L350,69 L360,69 L350,59 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="230" y="76.5684">IPC 过程使用的接口</text><!--link ContentResolver to IContentProvider--><path d="M292,338.19 C292,318.3 292,288.79 292,262.27 " fill="none" id="ContentResolver-&gt;IContentProvider" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="292,257.01,288,266.01,292,262.01,296,266.01,292,257.01" style="stroke: #A80036; stroke-width: 1.0;"/><!--reverse link ContentProvider to Transport--><path d="M635.1,403.44 C621.83,419.56 606.79,437.83 594.5,452.74 " fill="none" id="ContentProvider&lt;-Transport" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="643.52,393.22,636.6165,395.3036,635.8846,402.4775,642.7881,400.3939,643.52,393.22" style="stroke: #A80036; stroke-width: 1.0;"/><!--reverse link IContentProvider to ContentProviderNative--><path d="M371.43,265.36 C403.46,291.12 438.39,319.2 462.17,338.32 " fill="none" id="IContentProvider&lt;-ContentProviderNative" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="366.71,270.55,355.51,252.56,375.49,259.64,366.71,270.55" style="stroke: #A80036; stroke-width: 1.0;"/><!--reverse link IContentProvider to ContentProviderProxy--><path d="M216.09,270.51 C192.52,291.94 167.77,314.43 148.78,331.7 " fill="none" id="IContentProvider&lt;-ContentProviderProxy" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="211.43,265.29,230.94,257.01,220.85,275.64,211.43,265.29" style="stroke: #A80036; stroke-width: 1.0;"/><!--reverse link ContentProviderNative to Transport--><path d="M517.55,403.49 C528.3,419.68 540.49,438.05 550.41,452.99 " fill="none" id="ContentProviderNative&lt;-Transport" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="511.65,407.26,506.42,386.73,523.31,399.52,511.65,407.26" style="stroke: #A80036; stroke-width: 1.0;"/><!--reverse link ContentInterface to ContentProvider--><path d="M574.8,271.12 C596.7,292.36 619.63,314.6 637.27,331.7 " fill="none" id="ContentInterface&lt;-ContentProvider" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="569.73,275.96,560.25,257.01,579.48,265.91,569.73,275.96" style="stroke: #A80036; stroke-width: 1.0;"/><!--reverse link ContentInterface to ContentResolver--><path d="M423.59,261.72 C388.3,288.48 348.85,318.39 322.43,338.43 " fill="none" id="ContentInterface&lt;-ContentResolver" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="419.81,255.8,439.98,249.29,428.27,266.95,419.81,255.8" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml interfaces
package 客户端对象 {
abstract class ContentProviderProxy
abstract class ContentResolver
}
package 服务端对象 {
abstract class ContentProvider
abstract class ContentProviderNative
class Transport
}
package 接口 {
Interface ContentInterface
note top: 调用者调用，服务端要实现的接口
Interface IContentProvider
note top: IPC 过程使用的接口
}

ContentResolver ..> IContentProvider
ContentProvider *- - Transport
IContentProvider <|.. ContentProviderNative
IContentProvider <|.. ContentProviderProxy
ContentProviderNative <|.. Transport
ContentInterface <|.. ContentProvider
ContentInterface <|.. ContentResolver

Interface IContentProvider {
    + insert(...)
    + delete(...)
    + update(...)
    + query(...): Cursor
    + getType(...): String
}
Interface ContentInterface {
    + insert(...)
    + delete(...)
    + update(...)
    + query(...): Cursor
    + getType(...): String
}

class ContentProvider {
- mTransport
}
class Transport {
- ContentProvider mInterface
}
class ContentProviderProxy {
- IBinder mRemote
}
@enduml

PlantUML version 1.2019.09(Tue Aug 27 00:19:51 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 10.0.2+13
Operating System: Mac OS X
OS Version: 10.14.6
Default Encoding: US-ASCII
Language: zh
Country: CN
--></g></svg>