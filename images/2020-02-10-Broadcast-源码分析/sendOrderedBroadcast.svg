<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="560px" preserveAspectRatio="none" style="width:895px;height:560px;" version="1.1" viewBox="0 0 895 560" width="895px" zoomAndPan="magnify"><defs><filter height="300%" id="ft20hzq1ci5m9" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#ft20hzq1ci5m9)" height="52.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="90.5" y="458.2148"/><rect fill="#FFFFFF" filter="url(#ft20hzq1ci5m9)" height="118.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="323.5" y="136.4199"/><rect fill="#FFFFFF" filter="url(#ft20hzq1ci5m9)" height="76.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="328.5" y="178.7305"/><rect fill="#FFFFFF" filter="url(#ft20hzq1ci5m9)" height="34.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="333.5" y="221.041"/><rect fill="#FFFFFF" filter="url(#ft20hzq1ci5m9)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="323.5" y="487.5254"/><rect fill="#FFFFFF" filter="url(#ft20hzq1ci5m9)" height="71.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="532.5" y="255.3516"/><rect fill="#FFFFFF" filter="url(#ft20hzq1ci5m9)" height="131.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="673" y="326.9727"/><rect fill="#FFFFFF" filter="url(#ft20hzq1ci5m9)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="812" y="385.5938"/><rect fill="#FFFFFF" filter="url(#ft20hzq1ci5m9)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="812" y="428.9043"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="95" x2="95" y1="38.4883" y2="519.5254"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="328.5" x2="328.5" y1="38.4883" y2="519.5254"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="537" x2="537" y1="38.4883" y2="519.5254"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="678" x2="678" y1="38.4883" y2="519.5254"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="817" x2="817" y1="38.4883" y2="519.5254"/><rect fill="#FEFECE" filter="url(#ft20hzq1ci5m9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="15" y="23.5352">ActivityManagerService</text><rect fill="#FEFECE" filter="url(#ft20hzq1ci5m9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="8" y="518.5254"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="15" y="539.0605">ActivityManagerService</text><rect fill="#FEFECE" filter="url(#ft20hzq1ci5m9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="263.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="270.5" y="23.5352">BroadcastQueue</text><rect fill="#FEFECE" filter="url(#ft20hzq1ci5m9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="263.5" y="518.5254"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="270.5" y="539.0605">BroadcastQueue</text><rect fill="#FEFECE" filter="url(#ft20hzq1ci5m9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="141" x="465" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="127" x="472" y="23.5352">ApplicationThread</text><rect fill="#FEFECE" filter="url(#ft20hzq1ci5m9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="141" x="465" y="518.5254"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="127" x="472" y="539.0605">ApplicationThread</text><rect fill="#FEFECE" filter="url(#ft20hzq1ci5m9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="620" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="627" y="23.5352">ActivityThread</text><rect fill="#FEFECE" filter="url(#ft20hzq1ci5m9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="620" y="518.5254"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="98" x="627" y="539.0605">ActivityThread</text><rect fill="#FEFECE" filter="url(#ft20hzq1ci5m9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="138" x="746" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="124" x="753" y="23.5352">BroadcastReceiver</text><rect fill="#FEFECE" filter="url(#ft20hzq1ci5m9)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="138" x="746" y="518.5254"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="124" x="753" y="539.0605">BroadcastReceiver</text><rect fill="#FFFFFF" filter="url(#ft20hzq1ci5m9)" height="52.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="90.5" y="458.2148"/><rect fill="#FFFFFF" filter="url(#ft20hzq1ci5m9)" height="118.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="323.5" y="136.4199"/><rect fill="#FFFFFF" filter="url(#ft20hzq1ci5m9)" height="76.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="328.5" y="178.7305"/><rect fill="#FFFFFF" filter="url(#ft20hzq1ci5m9)" height="34.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="333.5" y="221.041"/><rect fill="#FFFFFF" filter="url(#ft20hzq1ci5m9)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="323.5" y="487.5254"/><rect fill="#FFFFFF" filter="url(#ft20hzq1ci5m9)" height="71.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="532.5" y="255.3516"/><rect fill="#FFFFFF" filter="url(#ft20hzq1ci5m9)" height="131.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="673" y="326.9727"/><rect fill="#FFFFFF" filter="url(#ft20hzq1ci5m9)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="812" y="385.5938"/><rect fill="#FFFFFF" filter="url(#ft20hzq1ci5m9)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="812" y="428.9043"/><polygon fill="#A80036" points="316.5,65.7988,326.5,69.7988,316.5,73.7988,320.5,69.7988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="95.5" x2="322.5" y1="69.7988" y2="69.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="102.5" y="65.0566">enqueueOrderedBroadcastLocked</text><polygon fill="#A80036" points="316.5,95.1094,326.5,99.1094,316.5,103.1094,320.5,99.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="95.5" x2="322.5" y1="99.1094" y2="99.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="102.5" y="94.3672">scheduleBroadcastLocked</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="328.5" x2="375.5" y1="123.4199" y2="123.4199"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="375.5" x2="375.5" y1="123.4199" y2="136.4199"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="334.5" x2="375.5" y1="136.4199" y2="136.4199"/><polygon fill="#A80036" points="344.5,132.4199,334.5,136.4199,344.5,140.4199,340.5,136.4199" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="340.5" y="118.6777">processNextBroadcast</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="333.5" x2="380.5" y1="165.7305" y2="165.7305"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="380.5" x2="380.5" y1="165.7305" y2="178.7305"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="339.5" x2="380.5" y1="178.7305" y2="178.7305"/><polygon fill="#A80036" points="349.5,174.7305,339.5,178.7305,349.5,182.7305,345.5,178.7305" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="345.5" y="160.9883">processNextBroadcastLocked</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="338.5" x2="385.5" y1="208.041" y2="208.041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="385.5" x2="385.5" y1="208.041" y2="221.041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="344.5" x2="385.5" y1="221.041" y2="221.041"/><polygon fill="#A80036" points="354.5,217.041,344.5,221.041,354.5,225.041,350.5,221.041" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="350.5" y="203.2988">processCurBroadcastLocked</text><polygon fill="#A80036" points="520.5,251.3516,530.5,255.3516,520.5,259.3516,524.5,255.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="328.5" x2="526.5" y1="255.3516" y2="255.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="335.5" y="250.6094">  scheduleReceiver</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="542.5" x2="584.5" y1="284.6621" y2="284.6621"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="584.5" x2="584.5" y1="284.6621" y2="297.6621"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="543.5" x2="584.5" y1="297.6621" y2="297.6621"/><polygon fill="#A80036" points="553.5,293.6621,543.5,297.6621,553.5,301.6621,549.5,297.6621" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="549.5" y="279.9199">new ReceiverData</text><polygon fill="#A80036" points="661,322.9727,671,326.9727,661,330.9727,665,326.9727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="537.5" x2="667" y1="326.9727" y2="326.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="544.5" y="322.2305">  handleReceiver</text><polygon fill="#A80036" points="805,352.2832,815,356.2832,805,360.2832,809,356.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="683" x2="811" y1="356.2832" y2="356.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="690" y="351.541">setPendingResult</text><polygon fill="#A80036" points="800,381.5938,810,385.5938,800,389.5938,804,385.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="683" x2="806" y1="385.5938" y2="385.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="690" y="380.8516">onReceive</text><polygon fill="#A80036" points="694,395.5938,684,399.5938,694,403.5938,690,399.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="688" x2="816" y1="399.5938" y2="399.5938"/><polygon fill="#A80036" points="800,424.9043,810,428.9043,800,432.9043,804,428.9043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="683" x2="806" y1="428.9043" y2="428.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="690" y="424.1621">sendFinished</text><polygon fill="#A80036" points="111.5,454.2148,101.5,458.2148,111.5,462.2148,107.5,458.2148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="105.5" x2="816" y1="458.2148" y2="458.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="117.5" y="453.4727">finishReceiver</text><polygon fill="#A80036" points="311.5,483.5254,321.5,487.5254,311.5,491.5254,315.5,487.5254" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="100.5" x2="317.5" y1="487.5254" y2="487.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="107.5" y="482.7832">finishReceiverLocked</text><polygon fill="#A80036" points="111.5,497.5254,101.5,501.5254,111.5,505.5254,107.5,501.5254" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="105.5" x2="327.5" y1="501.5254" y2="501.5254"/><!--
@startuml sendOrderedBroadcast
ActivityManagerService -> BroadcastQueue: enqueueOrderedBroadcastLocked
ActivityManagerService -> BroadcastQueue: scheduleBroadcastLocked
BroadcastQueue -> BroadcastQueue ++: processNextBroadcast
BroadcastQueue -> BroadcastQueue ++: processNextBroadcastLocked
BroadcastQueue -> BroadcastQueue ++: processCurBroadcastLocked
BroadcastQueue -> ApplicationThread - -:   scheduleReceiver
deactivate BroadcastQueue
deactivate BroadcastQueue
deactivate BroadcastQueue
activate ApplicationThread
ApplicationThread - -> ApplicationThread: new ReceiverData
ApplicationThread -> ActivityThread - -:   handleReceiver
activate ActivityThread
ActivityThread -> BroadcastReceiver: setPendingResult
ActivityThread -> BroadcastReceiver ++: onReceive
return
ActivityThread -> BroadcastReceiver ++: sendFinished
BroadcastReceiver -> ActivityManagerService - -: finishReceiver
activate ActivityManagerService
deactivate ActivityThread

ActivityManagerService -> BroadcastQueue ++: finishReceiverLocked
return
@enduml

PlantUML version 1.2019.09(Tue Aug 27 00:19:51 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 10.0.2+13
Operating System: Mac OS X
OS Version: 10.14.6
Default Encoding: US-ASCII
Language: zh
Country: CN
--></g></svg>