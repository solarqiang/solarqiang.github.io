<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="647px" preserveAspectRatio="none" style="width:1059px;height:647px;" version="1.1" viewBox="0 0 1059 647" width="1059px" zoomAndPan="magnify"><defs><filter height="300%" id="f4m2b03ef5c26" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="52.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="90.5" y="546.0137"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="161.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="323.5" y="136.4199"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="118.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="328.5" y="178.7305"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="76.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="333.5" y="221.041"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="34.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="338.5" y="263.3516"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="323.5" y="575.3242"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="104.1094" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="573.5" y="297.6621"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="74.7988" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="730" y="326.9727"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="144.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="839" y="401.7715"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="34.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="844" y="511.7031"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="976" y="460.3926"/><rect fill="#FEFECE" filter="url(#f4m2b03ef5c26)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="46" x="819" y="334.9727"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="826" y="355.5078">Args</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="95" x2="95" y1="38.4883" y2="607.3242"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="328.5" x2="328.5" y1="38.4883" y2="607.3242"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="578" x2="578" y1="38.4883" y2="607.3242"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="735" x2="735" y1="38.4883" y2="607.3242"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="844" x2="844" y1="367.7168" y2="607.3242"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="981" x2="981" y1="38.4883" y2="607.3242"/><rect fill="#FEFECE" filter="url(#f4m2b03ef5c26)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="8" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="15" y="23.5352">ActivityManagerService</text><rect fill="#FEFECE" filter="url(#f4m2b03ef5c26)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="8" y="606.3242"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="157" x="15" y="626.8594">ActivityManagerService</text><rect fill="#FEFECE" filter="url(#f4m2b03ef5c26)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="263.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="270.5" y="23.5352">BroadcastQueue</text><rect fill="#FEFECE" filter="url(#f4m2b03ef5c26)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="263.5" y="606.3242"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="112" x="270.5" y="626.8594">BroadcastQueue</text><rect fill="#FEFECE" filter="url(#f4m2b03ef5c26)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="141" x="506" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="127" x="513" y="23.5352">ApplicationThread</text><rect fill="#FEFECE" filter="url(#f4m2b03ef5c26)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="141" x="506" y="606.3242"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="127" x="513" y="626.8594">ApplicationThread</text><rect fill="#FEFECE" filter="url(#f4m2b03ef5c26)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="144" x="661" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="668" y="23.5352">ReceiverDispatcher</text><rect fill="#FEFECE" filter="url(#f4m2b03ef5c26)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="144" x="661" y="606.3242"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="130" x="668" y="626.8594">ReceiverDispatcher</text><rect fill="#FEFECE" filter="url(#f4m2b03ef5c26)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="46" x="819" y="606.3242"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="826" y="626.8594">Args</text><rect fill="#FEFECE" filter="url(#f4m2b03ef5c26)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="138" x="910" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="124" x="917" y="23.5352">BroadcastReceiver</text><rect fill="#FEFECE" filter="url(#f4m2b03ef5c26)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="138" x="910" y="606.3242"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="124" x="917" y="626.8594">BroadcastReceiver</text><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="52.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="90.5" y="546.0137"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="161.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="323.5" y="136.4199"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="118.9316" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="328.5" y="178.7305"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="76.6211" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="333.5" y="221.041"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="34.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="338.5" y="263.3516"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="323.5" y="575.3242"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="104.1094" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="573.5" y="297.6621"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="74.7988" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="730" y="326.9727"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="144.2422" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="839" y="401.7715"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="34.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="844" y="511.7031"/><rect fill="#FFFFFF" filter="url(#f4m2b03ef5c26)" height="14" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="976" y="460.3926"/><polygon fill="#A80036" points="316.5,65.7988,326.5,69.7988,316.5,73.7988,320.5,69.7988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="95.5" x2="322.5" y1="69.7988" y2="69.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="102.5" y="65.0566">enqueueOrderedBroadcastLocked</text><polygon fill="#A80036" points="316.5,95.1094,326.5,99.1094,316.5,103.1094,320.5,99.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="95.5" x2="322.5" y1="99.1094" y2="99.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="102.5" y="94.3672">scheduleBroadcastLocked</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="328.5" x2="375.5" y1="123.4199" y2="123.4199"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="375.5" x2="375.5" y1="123.4199" y2="136.4199"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="334.5" x2="375.5" y1="136.4199" y2="136.4199"/><polygon fill="#A80036" points="344.5,132.4199,334.5,136.4199,344.5,140.4199,340.5,136.4199" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="340.5" y="118.6777">processNextBroadcast</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="333.5" x2="380.5" y1="165.7305" y2="165.7305"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="380.5" x2="380.5" y1="165.7305" y2="178.7305"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="339.5" x2="380.5" y1="178.7305" y2="178.7305"/><polygon fill="#A80036" points="349.5,174.7305,339.5,178.7305,349.5,182.7305,345.5,178.7305" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="345.5" y="160.9883">processNextBroadcastLocked</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="338.5" x2="385.5" y1="208.041" y2="208.041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="385.5" x2="385.5" y1="208.041" y2="221.041"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="344.5" x2="385.5" y1="221.041" y2="221.041"/><polygon fill="#A80036" points="354.5,217.041,344.5,221.041,354.5,225.041,350.5,221.041" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="350.5" y="203.2988">deliverToRegisteredReceiverLocked</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="343.5" x2="390.5" y1="250.3516" y2="250.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="390.5" x2="390.5" y1="250.3516" y2="263.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="349.5" x2="390.5" y1="263.3516" y2="263.3516"/><polygon fill="#A80036" points="359.5,259.3516,349.5,263.3516,359.5,267.3516,355.5,263.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="142" x="355.5" y="245.6094">performReceiveLocked</text><polygon fill="#A80036" points="561.5,293.6621,571.5,297.6621,561.5,301.6621,565.5,297.6621" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="328.5" x2="567.5" y1="297.6621" y2="297.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="335.5" y="292.9199">  scheduleRegisteredReceiver</text><polygon fill="#A80036" points="718,322.9727,728,326.9727,718,330.9727,722,326.9727" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="583.5" x2="724" y1="326.9727" y2="326.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="590.5" y="322.2305">performReceive</text><polygon fill="#A80036" points="807,352.2832,817,356.2832,807,360.2832,811,356.2832" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="740" x2="813" y1="356.2832" y2="356.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="747" y="351.541">new</text><rect fill="#FEFECE" filter="url(#f4m2b03ef5c26)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="46" x="819" y="334.9727"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="826" y="355.5078">Args</text><polygon fill="#A80036" points="827,397.7715,837,401.7715,827,405.7715,831,401.7715" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="735" x2="833" y1="401.7715" y2="401.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="742" y="397.0293"> post</text><polygon fill="#A80036" points="969,427.082,979,431.082,969,435.082,973,431.082" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="849" x2="975" y1="431.082" y2="431.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="856" y="426.3398">setPendingResult</text><polygon fill="#A80036" points="964,456.3926,974,460.3926,964,464.3926,968,460.3926" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="849" x2="970" y1="460.3926" y2="460.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="856" y="455.6504">onReceive</text><polygon fill="#A80036" points="860,470.3926,850,474.3926,860,478.3926,856,474.3926" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="854" x2="980" y1="474.3926" y2="474.3926"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="849" x2="896" y1="498.7031" y2="498.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="896" x2="896" y1="498.7031" y2="511.7031"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="855" x2="896" y1="511.7031" y2="511.7031"/><polygon fill="#A80036" points="865,507.7031,855,511.7031,865,515.7031,861,511.7031" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="861" y="493.9609">sendFinished</text><polygon fill="#A80036" points="111.5,542.0137,101.5,546.0137,111.5,550.0137,107.5,546.0137" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="105.5" x2="843" y1="546.0137" y2="546.0137"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="88" x="117.5" y="541.2715">finishReceiver</text><polygon fill="#A80036" points="311.5,571.3242,321.5,575.3242,311.5,579.3242,315.5,575.3242" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="100.5" x2="317.5" y1="575.3242" y2="575.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="107.5" y="570.582">finishReceiverLocked</text><polygon fill="#A80036" points="111.5,585.3242,101.5,589.3242,111.5,593.3242,107.5,589.3242" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="105.5" x2="327.5" y1="589.3242" y2="589.3242"/><!--
@startuml SendRegisteredBroadcast2
ActivityManagerService -> BroadcastQueue: enqueueOrderedBroadcastLocked
ActivityManagerService -> BroadcastQueue: scheduleBroadcastLocked
BroadcastQueue -> BroadcastQueue ++: processNextBroadcast
BroadcastQueue -> BroadcastQueue ++: processNextBroadcastLocked
BroadcastQueue -> BroadcastQueue ++: deliverToRegisteredReceiverLocked
BroadcastQueue -> BroadcastQueue ++: performReceiveLocked
BroadcastQueue -> ApplicationThread - -:   scheduleRegisteredReceiver 
deactivate BroadcastQueue
deactivate BroadcastQueue
deactivate BroadcastQueue
deactivate BroadcastQueue

activate ApplicationThread
ApplicationThread -> ReceiverDispatcher ++: performReceive
ReceiverDispatcher - -> Args **: new 
ReceiverDispatcher -> Args - -:  post
activate Args
deactivate ApplicationThread

Args -> BroadcastReceiver: setPendingResult
Args -> BroadcastReceiver ++: onReceive
return
Args -> Args ++: sendFinished
Args -> ActivityManagerService - -: finishReceiver
activate ActivityManagerService
deactivate Args

ActivityManagerService -> BroadcastQueue ++: finishReceiverLocked
return
@enduml

PlantUML version 1.2019.09(Tue Aug 27 00:19:51 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 10.0.2+13
Operating System: Mac OS X
OS Version: 10.14.6
Default Encoding: US-ASCII
Language: zh
Country: CN
--></g></svg>